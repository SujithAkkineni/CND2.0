extends layout

block content
  h1.animate-in Your Order History ðŸ“‹

  if orders.length > 0
    .orders-container
      each order, index in orders
        .order-card(data-gsap-index=index)
          .order-header
            .order-info
              h3.order-number Order ##{index + 1}
              .order-date ðŸ“… #{order.createdAt.toDateString()}
            .order-status
              span.order-status-badge(class=`status-${order.status.toLowerCase().replace(' ', '-')}`)= order.status

          .order-details
            .dish-info
              if order.dish && order.dish.image
                img(src=order.dish.image, alt=order.dish.name, class='order-dish-image')
              else
                .dish-placeholder
                  span.no-image ðŸ½ï¸
                  span No Image Available
              .dish-details
                h4.dish-name= order.dish ? order.dish.name : 'N/A'
                .dish-seller ðŸ‘¨â€ðŸ³ #{order.dish ? order.dish.seller : 'N/A'}
                .dish-description= order.dish ? order.dish.description : 'No description available'

            .order-meta
              .order-quantities
                .quantity-item
                  span.label Quantity:
                  span.value #{order.quantity} serving#{order.quantity > 1 ? 's' : ''}
                .quantity-item
                  span.label Total Price:
                  span.value.price-value â‚¹#{order.totalPrice}

              .customer-info
                h4 Customer Details
                .info-item
                  span.label ðŸ‘¤ Buyer:
                  span.value= order.buyer
                .info-item
                  span.label ðŸ“ Address:
                  span.value= order.address
                .info-item
                  span.label ðŸ“ž Mobile:
                  span.value= order.mobile
                .info-item
                  span.label ðŸ“® Pincode:
                  span.value= order.pincode

  else
    .no-orders
      h2 ðŸ“­ No Orders Yet
      p You haven't placed any orders. Start exploring delicious home-cooked meals from your neighbors!
      a(href='/order').explore-btn ðŸŒŸ Browse Dishes Now

  script.
    // GSAP Animations for orders page
    gsap.registerPlugin();

    gsap.set('h1', { opacity: 0, y: -30 });
    gsap.set('.order-card', { opacity: 0, y: 50 });

    // Header animation
    gsap.to('h1', {
      opacity: 1,
      y: 0,
      duration: 0.8,
      ease: "power2.out"
    });

    // Staggered order card animations
    gsap.to('.order-card', {
      opacity: 1,
      y: 0,
      duration: 0.6,
      stagger: 0.15,
      ease: "power2.out",
      delay: 0.3
    });

    // Add hover animations for order cards
    gsap.utils.toArray('.order-card').forEach((card) => {
      const img = card.querySelector('.order-dish-image');
      const info = card.querySelector('.dish-details');

      card.addEventListener('mouseenter', () => {
        gsap.to(card, {
          y: -5,
          duration: 0.3,
          ease: "power2.out"
        });

        if (img) {
          gsap.to(img, {
            scale: 1.05,
            duration: 0.3,
            ease: "power2.out"
          });
        }

        if (info) {
          gsap.to(info, {
            x: 5,
            duration: 0.3,
            ease: "power2.out"
          });
        }
      });

      card.addEventListener('mouseleave', () => {
        gsap.to(card, {
          y: 0,
          duration: 0.3,
          ease: "power2.out"
        });

        if (img) {
          gsap.to(img, {
            scale: 1,
            duration: 0.3,
            ease: "power2.out"
          });
        }

        if (info) {
          gsap.to(info, {
            x: 0,
            duration: 0.3,
            ease: "power2.out"
          });
        }
      });
    });
